# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –Ω–∞ iOS

## –ü—Ä–æ–±–ª–µ–º–∞:
–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π.

## –†–µ—à–µ–Ω–∏–µ:

–£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π - —Ç–µ–ø–µ—Ä—å –æ–Ω–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è **–≤—Å–µ–≥–¥–∞**, –µ—Å–ª–∏ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ "denied".

---

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –ó–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`_startRecording`):
- –¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω **–≤—Å–µ–≥–¥–∞**, –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"

### 2. –ó–≤–æ–Ω–∫–∏ (`_startCall`):
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω **–≤—Å–µ–≥–¥–∞**, –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- –î–ª—è –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∫–∞–º–µ—Ä—É **–≤—Å–µ–≥–¥–∞**, –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ

### 3. –í—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (`_pickAndSendImage`):
- –î–æ–±–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –≥–∞–ª–µ—Ä–µ–µ –ø–µ—Ä–µ–¥ –≤—ã–±–æ—Ä–æ–º —Ñ–æ—Ç–æ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ `Permission.photos` (iOS 14+), —Ç–∞–∫ –∏ `Permission.mediaLibrary` (—Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏)

### 4. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`main.dart`):
- –£–±—Ä–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –¢–µ–ø–µ—Ä—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è Apple)

---

## üì± –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å:

### –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ:**
   - –ü–æ—è–≤–∏—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏–∞–ª–æ–≥ iOS: "Messenger App —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É"
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "OK" ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
   - –ó–∞–ø–∏—Å—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞:**
   - –ü–æ—è–≤–∏—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏–∞–ª–æ–≥ iOS: "Messenger App —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É"
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "OK" ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
   - –ó–≤–æ–Ω–æ–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ç–æ:**
   - –ü–æ—è–≤–∏—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏–∞–ª–æ–≥ iOS: "Messenger App —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–∏–º —Ñ–æ—Ç–æ"
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "OK" ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≥–∞–ª–µ—Ä–µ—è

---

## üîÑ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. –û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Mac:
```bash
cd msngIosAndroidv2
git pull
```

### 2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
flutter clean
flutter pub get
flutter build ipa --release
```

### 3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–π –±–∏–ª–¥ –≤ TestFlight:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Transporter –∏–ª–∏ Xcode Organizer
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–π `.ipa` —Ñ–∞–π–ª

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:
- –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–∑ TestFlight
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ (–∑–≤–æ–Ω–æ–∫, –∑–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ, –≤—ã–±–æ—Ä —Ñ–æ—Ç–æ)
- –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

- **–£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–æ–≤–æ–≥–æ –±–∏–ª–¥–∞
- –°—Ç–∞—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –º–æ–≥—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤–æ–≥–æ –±–∏–ª–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ

---

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö iOS:

–ï—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤—Å–µ –µ—â–µ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è:

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Messenger App ‚Üí –†–∞–∑—Ä–µ—à–µ–Ω–∏—è**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ä–∞–∑–¥–µ–ª "–†–∞–∑—Ä–µ—à–µ–Ω–∏—è" –≤–∏–¥–µ–Ω
3. –ï—Å–ª–∏ —Ä–∞–∑–¥–µ–ª–∞ –Ω–µ—Ç, –∑–Ω–∞—á–∏—Ç Info.plist –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Info.plist:

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `ios/Runner/Info.plist` –µ—Å—Ç—å:
- ‚úÖ `NSMicrophoneUsageDescription`
- ‚úÖ `NSCameraUsageDescription`
- ‚úÖ `NSPhotoLibraryUsageDescription`
- ‚úÖ `NSPhotoLibraryAddUsageDescription`

---

## ‚úÖ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏!
